{% extends "Admin/layout.twig" %}
{% block content %}

	<div class="container mt-4">
		<h2>{{title}}</h2>
		<p>{{description}}</p>
        <a href="{{ basePath }}/admin/inventory/create" class="btn btn-primary mb-3">Nuevo</a>
		<table id="inventoryTable" class="table table-striped table-bordered" style="width:100%">
			<thead>
				<tr>
					<th>ID</th>
					<th>Imagen</th>
					<th>Nombre</th>
					<th>Categoría</th>
					<th>Cantidad</th>
					<th>Precio</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				{% for item in inventory %}
					<tr>
						
						<td>{{ item.id }}</td>
						<td>
							{% if item.productInventoryDetail.picture %}
								<img src="{{ picturePath }}/{{ item.productInventoryDetail.picture }}" alt="Imagen" style="width: 50px; height: 50px; object-fit: cover;">
							{% else %}
								<span class="text-muted">Sin imagen</span>
							{% endif %}
						</td>
						<td>{{ item.productInventoryDetail.name }}</td>
						<td>{{ item.productCategory.name }}</td>
						<td>{{ item.productInventoryDetail.stock }}</td>
						<td>{{ item.productInventoryDetail.price|number_format(2, '.', ',') ~ ' $' }}</td>
						<td>
							<a href="{{basePath}}/admin/inventory/{{ item.id }}" class="btn btn-sm btn-info">Ver</a>
                            <a href="{{basePath}}/admin/inventory/edit/{{ item.id }}" class="btn btn-sm btn-warning">Editar</a>
                            <a href="{{basePath}}/admin/inventory/delete/{{ item.id }}" class="btn btn-sm btn-danger">Eliminar</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	 <script>
		    document.addEventListener('DOMContentLoaded', function() {
		        $('#inventoryTable').DataTable({
		            language: {
		                //url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json'
						//public\assets\js\es-ES.json
						url: '{{ basePath }}/public/assets/js/es-ES.json'
		            },
					//buscar al lado izquierdo
					searching: false, // Habilitar la búsqueda
					search: {
						"caseInsensitive": true // Búsqueda sin distinción entre mayúsculas y minúsculas
					},
	                pageLength: 5,
					lengthChange: false, // Permitir cambiar la cantidad de registros mostrados
					//quitar mostrar 5, 10, 25, 50, 100

	                /*lengthMenu: [5, 10, 25, 50, 100],
	                order: [[0, 'asc']],
	                columnDefs: [
	                    { orderable: true, targets: [0, 1, 2, 3, 4] },
	                    { orderable: false, targets: [5] }
	                ]*/
		        });
		    });
		</script>
{% endblock %}
